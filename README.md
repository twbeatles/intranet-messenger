# ğŸ”’ ì‚¬ë‚´ ì›¹ë©”ì‹ ì € v3.5

Flask + Socket.IO + PyQt6 ê¸°ë°˜ì˜ **ì¢…ë‹¨ê°„ ì•”í˜¸í™”(E2E)** ì‚¬ë‚´ ì›¹ ë©”ì‹ ì € ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

## âœ¨ v3.5 ì—…ë°ì´íŠ¸

- ğŸ¨ **ëœë¤ í”„ë¡œí•„ ìƒ‰ìƒ**: ìœ ì €ë§ˆë‹¤ ê³ ìœ í•œ ì•„ë°”íƒ€ ìƒ‰ìƒ (12ê°€ì§€ íŒ”ë ˆíŠ¸)
- ğŸ”„ **ìƒˆë¡œê³ ì¹¨ ë¡œê·¸ì¸ ìœ ì§€**: /api/me ì„¸ì…˜ ì²´í¬ë¡œ ìë™ ë¡œê·¸ì¸ ë³µì›
- â†©ï¸ **ë‹µì¥ í•˜ì´ë¼ì´íŠ¸ ê°œì„ **: ìƒˆ ë©”ì‹œì§€ì—ë„ ì¦‰ì‹œ í•˜ì´ë¼ì´íŠ¸ ì ìš©
- âœï¸ **ë©”ì‹œì§€ ìˆ˜ì •/ì‚­ì œ**: ìì‹ ì˜ ë©”ì‹œì§€ ìˆ˜ì • ë° ì‚­ì œ ê¸°ëŠ¥
- ğŸ“ **ì½ì§€ ì•Šì€ ë©”ì‹œì§€ í‘œì‹œ**: "ì—¬ê¸°ì„œë¶€í„° ì½ì§€ ì•ŠìŒ" êµ¬ë¶„ì„ 
- â¬‡ï¸ **ìŠ¤í¬ë¡¤ í•˜ë‹¨ ë²„íŠ¼**: ì±„íŒ…ì°½ í•˜ë‹¨ìœ¼ë¡œ ë¹ ë¥´ê²Œ ì´ë™
- ğŸ“· **í”„ë¡œí•„ ì‚¬ì§„ ë¦¬íŒ©í† ë§**: í†µí•© í—¬í¼ í•¨ìˆ˜ë¡œ ì½”ë“œ ê°œì„ 

## âœ¨ v3.4 ì—…ë°ì´íŠ¸

- ğŸ¨ **í…Œë§ˆ ì»¤ìŠ¤í„°ë§ˆì´ì§•**: 10ê°€ì§€ ìƒ‰ìƒ í”„ë¦¬ì…‹ (Emerald, Ocean, Purple ë“±)
- ğŸŒ— **ë¼ì´íŠ¸/ë‹¤í¬ ëª¨ë“œ**: ì‹œìŠ¤í…œ ì„¤ì • ì—°ë™ + ìˆ˜ë™ ì„ íƒ
- ğŸ–¼ **ì±„íŒ… ë°°ê²½**: ë„íŠ¸, ê·¸ë¦¬ë“œ, ê·¸ë¼ë°ì´ì…˜ íŒ¨í„´
- ğŸ‘¤ **í”„ë¡œí•„ ê´€ë¦¬**: ë‹‰ë„¤ì„ ë³€ê²½, í”„ë¡œí•„ ì‚¬ì§„, ìƒíƒœ ë©”ì‹œì§€
- âš¡ **ì„±ëŠ¥ ìµœì í™”**: broadcast ì œê±°, ë°© ëª©ë¡ ìºì‹±, ë‹¤ì¤‘ ì„¸ì…˜ ì§€ì›
- ğŸ” **E2E ë³µí˜¸í™” ê°œì„ **: 10ëª… ì´ìƒ ì±„íŒ…ë°© ì•ˆì •ì„± í–¥ìƒ

## âœ¨ v3.1 ì—…ë°ì´íŠ¸

- ğŸš€ **ê³ ì„±ëŠ¥ ë™ì‹œ ì ‘ì†**: gevent ë¹„ë™ê¸° ë“œë¼ì´ë²„ë¡œ ìˆ˜ì‹­~ìˆ˜ë°± ëª… ë™ì‹œ ì ‘ì† ì§€ì›
- âš¡ **ì—°ê²° ì•ˆì •ì„± í–¥ìƒ**: ping_timeout 120ì´ˆ, ëŠê¹€ ë°©ì§€ ìµœì í™”
- ğŸ“Š **ì„±ëŠ¥ ì„¤ì • ë¶„ë¦¬**: config.pyì—ì„œ ë™ì‹œ ì ‘ì† ê´€ë ¨ ì„¤ì • ê´€ë¦¬
- ğŸ”§ **Redis ë©”ì‹œì§€ í ì§€ì›**: ëŒ€ê·œëª¨ ë°°í¬ ì‹œ í™•ì¥ ê°€ëŠ¥

## âœ¨ v3.0 ì—…ë°ì´íŠ¸

- ğŸ” **HTTPS ì§€ì›**: ìì²´ ì„œëª… SSL ì¸ì¦ì„œ ìƒì„± ë° ë³´ì•ˆ ì—°ê²°
- ğŸ”” **ë°ìŠ¤í¬í†± ì•Œë¦¼**: Web Notification APIë¡œ ìƒˆ ë©”ì‹œì§€ ì•Œë¦¼
- ğŸ’¾ **ì˜¤í”„ë¼ì¸ ìºì‹±**: IndexedDBë¥¼ í†µí•œ ë©”ì‹œì§€ ë¡œì»¬ ì €ì¥
- ğŸ—ï¸ **ì½”ë“œ ëª¨ë“ˆí™”**: ìœ ì§€ë³´ìˆ˜ê°€ ì‰¬ìš´ êµ¬ì¡°ë¡œ ë¦¬íŒ©í† ë§
- ğŸ¢ **ì‚¬ë‚´ë§ í˜¸í™˜**: ì™¸ë¶€ ì¸í„°ë„· ì—†ì´ ì™„ì „ ë…ë¦½ ë™ì‘

## ğŸ”’ ì‚¬ë‚´ë§/íì‡„ë§ í˜¸í™˜ì„±

ì´ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ **ì™¸ë¶€ ì¸í„°ë„· ì—°ê²° ì—†ì´** ì™„ì „íˆ ë…ë¦½ì ìœ¼ë¡œ ë™ì‘í•©ë‹ˆë‹¤:

- âœ… Socket.IO ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œì»¬ í¬í•¨ (`/static/js/socket.io.min.js`)
- âœ… CryptoJS ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œì»¬ í¬í•¨ (`/static/js/crypto-js.min.js`)
- âœ… ì‹œìŠ¤í…œ í°íŠ¸ë§Œ ì‚¬ìš© (ì™¸ë¶€ ì›¹í°íŠ¸ ì—†ìŒ)
- âœ… ì™¸ë¶€ CDN, API í˜¸ì¶œ ì—†ìŒ
- âœ… SQLite ë¡œì»¬ ë°ì´í„°ë² ì´ìŠ¤

## ğŸŒ ë¸Œë¼ìš°ì € í˜¸í™˜ì„±

| ë¸Œë¼ìš°ì € | ìµœì†Œ ë²„ì „ | ê¶Œì¥ ë²„ì „ |
|---------|----------|----------|
| Chrome | 55+ | ìµœì‹  |
| Edge | 79+ | ìµœì‹  |
| Firefox | 52+ | ìµœì‹  |
| Safari | 11+ | ìµœì‹  |

> âš ï¸ **Internet ExplorerëŠ” ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.**

## ì£¼ìš” ê¸°ëŠ¥

### ë³´ì•ˆ
- **ì¢…ë‹¨ê°„ ì•”í˜¸í™” (E2E)** - AES-256ìœ¼ë¡œ ì„œë²„ ê´€ë¦¬ìë„ ë©”ì‹œì§€ í™•ì¸ ë¶ˆê°€
- **HTTPS** - SSL/TLS ì•”í˜¸í™” í†µì‹ 
- **ë¹„ë°€ë²ˆí˜¸ ì†”íŠ¸ í•´ì‹±**

### ì±„íŒ…
- **1:1 / ê·¸ë£¹ ëŒ€í™”**
- **ì½ìŒ í™•ì¸**
- **íŒŒì¼/ì´ë¯¸ì§€ ì²¨ë¶€**
- **ì´ëª¨ì§€**

### ì•Œë¦¼
- **ë°ìŠ¤í¬í†± ì•Œë¦¼** - ìƒˆ ë©”ì‹œì§€ ìˆ˜ì‹  ì‹œ ë¸Œë¼ìš°ì € ì•Œë¦¼
- **ì˜¤í”„ë¼ì¸ ìºì‹±** - ì„œë²„ ì¬ì‹œì‘ ì‹œì—ë„ ìµœê·¼ ë©”ì‹œì§€ ìœ ì§€

### ì„œë²„ ê´€ë¦¬ (PyQt6 GUI)
- **ì‹œìŠ¤í…œ íŠ¸ë ˆì´**
- **HTTPS í™œì„±í™”/ë¹„í™œì„±í™”**
- **SSL ì¸ì¦ì„œ ìƒì„±**
- **ì‹¤ì‹œê°„ í†µê³„**

## ğŸ“¦ ì„¤ì¹˜

### ê¸°ë³¸ ì„¤ì¹˜
```powershell
pip install flask flask-socketio simple-websocket pycryptodome pyqt6 cryptography
```

### ê³ ì„±ëŠ¥ ë™ì‹œ ì ‘ì† ì§€ì› (ê¶Œì¥)
```powershell
pip install flask flask-socketio pycryptodome pyqt6 cryptography gevent gevent-websocket
```

> âš ï¸ **ì°¸ê³ **: `gevent`ë¥¼ ì„¤ì¹˜í•˜ë©´ ìˆ˜ì‹­~ìˆ˜ë°± ëª…ì˜ ë™ì‹œ ì ‘ì†ì„ ì•ˆì •ì ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
> ì„¤ì¹˜í•˜ì§€ ì•Šìœ¼ë©´ `threading` ëª¨ë“œë¡œ ë™ì‘í•˜ë©°, ë™ì‹œ ì ‘ì†ì´ ì œí•œë©ë‹ˆë‹¤.

## ğŸš€ ì‹¤í–‰

### GUI ëª¨ë“œ (ê¶Œì¥)
```powershell
python server.py
```

### CLI ëª¨ë“œ
```powershell
python server.py --cli
```

### ê¸°ì¡´ ë²„ì „ ì‹¤í–‰
```powershell
python messenger_server.py
```

## ğŸ“± ì ‘ì†

- **ë¡œì»¬ (HTTP)**: http://localhost:5000
- **ë¡œì»¬ (HTTPS)**: https://localhost:5000
- **ë„¤íŠ¸ì›Œí¬**: https://<ì„œë²„IP>:5000

> âš ï¸ HTTPS ì‚¬ìš© ì‹œ ìì²´ ì„œëª… ì¸ì¦ì„œì´ë¯€ë¡œ ë¸Œë¼ìš°ì €ì—ì„œ ë³´ì•ˆ ê²½ê³ ê°€ í‘œì‹œë©ë‹ˆë‹¤.
> "ê³ ê¸‰" â†’ "ì•ˆì „í•˜ì§€ ì•ŠìŒ ì§„í–‰"ì„ í´ë¦­í•˜ì—¬ ì ‘ì†í•˜ì„¸ìš”.

## ğŸ—‚ï¸ íŒŒì¼ êµ¬ì¡°

```
ì‚¬ë‚´ ë©”ì‹ ì €/
â”œâ”€â”€ server.py                # ìƒˆ ë©”ì¸ ì§„ì…ì  (v3.0)
â”œâ”€â”€ messenger_server.py      # ê¸°ì¡´ ë‹¨ì¼ íŒŒì¼ ë²„ì „ (v2.5)
â”œâ”€â”€ config.py                # ì„¤ì • íŒŒì¼
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ __init__.py          # Flask ì•± íŒ©í† ë¦¬
â”‚   â”œâ”€â”€ routes.py            # HTTP ë¼ìš°íŠ¸
â”‚   â”œâ”€â”€ sockets.py           # Socket.IO ì´ë²¤íŠ¸
â”‚   â”œâ”€â”€ models.py            # ë°ì´í„°ë² ì´ìŠ¤
â”‚   â””â”€â”€ utils.py             # ìœ í‹¸ë¦¬í‹°
â”œâ”€â”€ gui/
â”‚   â””â”€â”€ server_window.py     # PyQt6 GUI
â”œâ”€â”€ certs/
â”‚   â”œâ”€â”€ generate_cert.py     # ì¸ì¦ì„œ ìƒì„±
â”‚   â”œâ”€â”€ cert.pem             # SSL ì¸ì¦ì„œ (ìë™ ìƒì„±)
â”‚   â””â”€â”€ key.pem              # ê°œì¸í‚¤ (ìë™ ìƒì„±)
â”œâ”€â”€ static/
â”‚   â”œâ”€â”€ css/style.css        # ìŠ¤íƒ€ì¼ì‹œíŠ¸
â”‚   â”œâ”€â”€ js/
â”‚   â”‚   â”œâ”€â”€ app.js           # ë©”ì¸ ì•± ë¡œì§
â”‚   â”‚   â”œâ”€â”€ notification.js  # ì•Œë¦¼ ëª¨ë“ˆ
â”‚   â”‚   â”œâ”€â”€ storage.js       # ë¡œì»¬ ì €ì¥ì†Œ
â”‚   â”‚   â”œâ”€â”€ socket.io.min.js # Socket.IO (ë¡œì»¬)
â”‚   â”‚   â””â”€â”€ crypto-js.min.js # CryptoJS (ë¡œì»¬)
â”‚   â””â”€â”€ sw.js                # Service Worker
â”œâ”€â”€ templates/
â”‚   â””â”€â”€ index.html           # HTML í…œí”Œë¦¿
â”œâ”€â”€ uploads/                 # íŒŒì¼ ì—…ë¡œë“œ (ìë™ ìƒì„±)
â”œâ”€â”€ messenger.db             # SQLite DB (ìë™ ìƒì„±)
â””â”€â”€ server.log               # ì„œë²„ ë¡œê·¸ (ìë™ ìƒì„±)
```

## ğŸ”‘ SSL ì¸ì¦ì„œ ìƒì„±

GUIì—ì„œ "ì¸ì¦ì„œ ìƒì„±" ë²„íŠ¼ì„ í´ë¦­í•˜ê±°ë‚˜:

```powershell
cd "d:\google antigravity\ì‚¬ë‚´ ë©”ì‹ ì €"
python certs/generate_cert.py
```

## ğŸ“¦ AUTO-PY-TO-EXE íŒ¨í‚¤ì§•

### 1. ì‚¬ì „ ì¤€ë¹„

```powershell
pip install auto-py-to-exe pyinstaller
```

### 2. ì‹¤í–‰

```powershell
auto-py-to-exe
```

### 3. ê¸°ë³¸ ì„¤ì •

| ì„¤ì • í•­ëª© | ê°’ |
|-----------|-----|
| Script Location | `server.py` ì„ íƒ |
| Onefile/One Directory | **One Directory** ì„ íƒ |
| Console Window | **Window Based (No Console)** ì„ íƒ |
| Output Directory | ì›í•˜ëŠ” ì¶œë ¥ í´ë” ì„ íƒ |

### 4. Additional Files ì¶”ê°€ âš ï¸ ì¤‘ìš”

`Add Folder` ë²„íŠ¼ìœ¼ë¡œ ë‹¤ìŒ í´ë”ë“¤ì„ ì¶”ê°€:

| ì†ŒìŠ¤ í´ë” | ëŒ€ìƒ ê²½ë¡œ |
|-----------|----------|
| `static/` | `static/` |
| `templates/` | `templates/` |
| `app/` | `app/` |
| `gui/` | `gui/` |
| `certs/` | `certs/` |

`Add Files` ë²„íŠ¼ìœ¼ë¡œ ë‹¤ìŒ íŒŒì¼ ì¶”ê°€:

| ì†ŒìŠ¤ íŒŒì¼ | ëŒ€ìƒ ê²½ë¡œ |
|-----------|----------|
| `config.py` | `.` |

### 5. Advanced íƒ­ - Hidden Imports ì¶”ê°€ âš ï¸ í•„ìˆ˜

**v3.3 ì—…ë°ì´íŠ¸**: threading, contextlib ê´€ë ¨ ëª¨ë“ˆ ì¶”ê°€

```
# Socket.IO / Engine.IO
engineio.async_drivers.threading
engineio.async_drivers.gevent
engineio.async_drivers.gevent_uwsgi
simple_websocket
flask_socketio
socketio
engineio

# gevent (ê³ ì„±ëŠ¥ ë™ì‹œ ì ‘ì†)
gevent
gevent.monkey
gevent.pywsgi
gevent.socket
gevent.ssl
gevent.local
gevent.queue
gevent.event
gevent.lock
geventwebsocket
geventwebsocket.handler
geventwebsocket.websocket

# ì•”í˜¸í™”
cryptography
cryptography.hazmat.primitives.kdf.pbkdf2
cryptography.hazmat.backends
Crypto
Crypto.Cipher
Crypto.Cipher.AES
Crypto.Random
Crypto.Util.Padding

# Flask / Werkzeug
werkzeug
werkzeug.routing
werkzeug.serving
jinja2
flask.json
```

### 6. íŒ¨í‚¤ì§• ì‹¤í–‰

`CONVERT .PY TO .EXE` ë²„íŠ¼ í´ë¦­

### 7. ê²°ê³¼ë¬¼ í™•ì¸

```
output/
â””â”€â”€ ì‚¬ë‚´ë©”ì‹ ì €v3.1/
    â”œâ”€â”€ ì‚¬ë‚´ë©”ì‹ ì €v3.1.exe  # ì‹¤í–‰ íŒŒì¼
    â”œâ”€â”€ static/             # ì›¹ ë¦¬ì†ŒìŠ¤
    â”œâ”€â”€ templates/          # HTML í…œí”Œë¦¿
    â”œâ”€â”€ app/                # ë°±ì—”ë“œ ëª¨ë“ˆ
    â”œâ”€â”€ gui/                # GUI ëª¨ë“ˆ
    â”œâ”€â”€ certs/              # SSL ì¸ì¦ì„œ
    â””â”€â”€ config.py           # ì„¤ì • íŒŒì¼
```

### ëŒ€ì•ˆ: spec íŒŒì¼ ì§ì ‘ ì‚¬ìš©

```powershell
cd "d:\google antigravity\ì‚¬ë‚´ ë©”ì‹ ì €"
pyinstaller messenger.spec
```

---

## âš ï¸ íŒ¨í‚¤ì§• ì£¼ì˜ì‚¬í•­

1. **í´ë” êµ¬ì¡° ìœ ì§€**: `static/`, `templates/`, `app/`, `gui/`, `certs/` í´ë” ë°˜ë“œì‹œ í¬í•¨
2. **Hidden Imports**: Socket.IO, Crypto, Flask, **gevent** ê´€ë ¨ ëª¨ë“ˆ ëˆ„ë½ ì‹œ ì‹¤í–‰ ì˜¤ë¥˜ ë°œìƒ
3. **config.py**: ë£¨íŠ¸ì— ë°˜ë“œì‹œ í¬í•¨ (íŒ¨í‚¤ì§• í›„ ì„¤ì • ë³€ê²½ ê°€ëŠ¥)
4. **One Directory ê¶Œì¥**: One Fileì€ ë¦¬ì†ŒìŠ¤ ì ‘ê·¼ ë¬¸ì œ ë°œìƒ ê°€ëŠ¥
5. **ì˜¤ë¥˜ ì‹œ**: `build/`, `dist/` í´ë” ì‚­ì œ í›„ `pyinstaller messenger.spec --clean` ì‹¤í–‰
6. **gevent ë¯¸ì„¤ì¹˜ ì‹œ**: gevent ì—†ì´ íŒ¨í‚¤ì§•í•˜ë©´ `threading` ëª¨ë“œë¡œ ë™ì‘ (ë™ì‹œ ì ‘ì† ì œí•œ)

---

## âš™ï¸ ì„¤ì • íŒŒì¼ (config.py)

íŒ¨í‚¤ì§• í›„ì—ë„ `config.py`ë¥¼ ìˆ˜ì •í•˜ì—¬ ì„¤ì • ë³€ê²½ ê°€ëŠ¥:

```python
# ë¹„ë™ê¸° ëª¨ë“œ: 'gevent' (ê¶Œì¥), 'eventlet', 'threading'
ASYNC_MODE = 'gevent'

# Socket.IO ì„¤ì •
PING_TIMEOUT = 120      # ì—°ê²° íƒ€ì„ì•„ì›ƒ (ì´ˆ)
PING_INTERVAL = 25      # í•‘ ê°„ê²© (ì´ˆ)
MAX_CONNECTIONS = 0     # ë™ì‹œ ì—°ê²° ì œí•œ (0 = ë¬´ì œí•œ)

# HTTPS ì„¤ì •
USE_HTTPS = False       # Trueë¡œ ë³€ê²½ ì‹œ HTTPS í™œì„±í™”
DEFAULT_PORT = 5000     # ì„œë²„ í¬íŠ¸
```

---

## âš ï¸ ê¸°íƒ€ ì£¼ì˜ì‚¬í•­

- ì²« ì‹¤í–‰ ì‹œ `messenger.db`, `uploads/`, `server.log`ê°€ ìë™ ìƒì„±ë©ë‹ˆë‹¤
- HTTPS ì‚¬ìš© ì‹œ SSL ì¸ì¦ì„œê°€ ìë™ ìƒì„±ë©ë‹ˆë‹¤ (cryptography ë¼ì´ë¸ŒëŸ¬ë¦¬ í•„ìš”)
- **ì‚¬ë‚´ë§ì—ì„œ ì™¸ë¶€ ì¸í„°ë„· ì—†ì´ ì™„ì „íˆ ë…ë¦½ ë™ì‘í•©ë‹ˆë‹¤**
- **ê¸°ì¡´ v2.5 ì‚¬ìš©ì**: `messenger.db`ë¥¼ ì‚­ì œí•˜ê³  ìƒˆë¡œ ì‹œì‘í•´ì•¼ í•©ë‹ˆë‹¤ (ë¹„ë°€ë²ˆí˜¸ í•´ì‹œ í˜¸í™˜ì„±)
- **gevent ì„¤ì¹˜ ê¶Œì¥**: ìˆ˜ì‹­ ëª… ì´ìƒ ë™ì‹œ ì ‘ì† ì‹œ í•„ìˆ˜

---

## ğŸ“Š ì„±ëŠ¥ ë¹„êµ

| ë¹„ë™ê¸° ëª¨ë“œ | ë™ì‹œ ì ‘ì† | ì„¤ì¹˜ í•„ìš” |
|------------|----------|----------|
| `gevent` (ê¶Œì¥) | ìˆ˜ë°±~ìˆ˜ì²œ ëª… | `pip install gevent gevent-websocket` |
| `eventlet` | ìˆ˜ë°± ëª… | `pip install eventlet` |
| `threading` | 5~10ëª… | ê¸°ë³¸ í¬í•¨ |
